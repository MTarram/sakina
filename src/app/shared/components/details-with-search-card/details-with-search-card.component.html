<div class="tabPanel">
  <div class="cityFrom">
    <p-dropdown
      [options]="countriesFrom"
      (onFilter)="onInputFromChange($event)"
      (onChange)="onCountryFromChange($event)"
      [(ngModel)]="selectedCountryFrom"
      optionLabel="name"
      [filter]="true"
      [showClear]="true"
      placeholder="From"
      #citFromInput
    >
    </p-dropdown>
    <h3 *ngIf="selectedCountryFrom?.name">{{ selectedCountryFrom?.name }}</h3>
    <h6 *ngIf="selectedCountryFrom?.iataCode">
      {{
        selectedCountryFrom?.iataCode +
          ", " +
          selectedCountryFrom?.address?.cityName +
          " " +
          selectedCountryFrom?.address?.countryName
      }}
    </h6>
  </div>
  <div class="cityTo">
    <p-dropdown
      [options]="countriesTo"
      (onFilter)="onInputToChange($event)"
      (onChange)="onCountryToChange($event)"
      [(ngModel)]="selectedCountryTo"
      optionLabel="name"
      [filter]="true"
      [showClear]="true"
      placeholder="To"
      #citToInput
    >
    </p-dropdown>
    <h3 *ngIf="selectedCountryTo?.name">{{ selectedCountryTo?.name }}</h3>
    <h6 *ngIf="selectedCountryTo?.iataCode">
      {{
        selectedCountryTo?.iataCode +
          ", " +
          selectedCountryTo?.address?.cityName +
          " " +
          selectedCountryTo?.address?.countryName
      }}
    </h6>
  </div>
  <div class="dateFrom">
    <p-calendar
      [(ngModel)]="dateCalendarFrom"
      [appendTo]="'body'"
      [minDate]="dateTime"
      placeholder="Departure"
      [iconDisplay]="'input'"
      [showIcon]="true"
      inputId="templatedisplay"
    >
      <ng-template pTemplate="inputicon" let-clickCallBack="clickCallBack">
        <i class="pi pi-angle-down pointer-events-none"></i>
      </ng-template>
    </p-calendar>
    <h3 style="width: 25rem !important" *ngIf="dateCalendarFrom">
      {{ dateCalendarFrom | date : "EEEE" }}
    </h3>
  </div>
  <div class="dateTo">
    <p-calendar
      [(ngModel)]="dateCalendarTo"
      [appendTo]="'body'"
      [disabled]="type !== 2"
      [minDate]="dateCalendarFrom ? dateCalendarFrom : dateTime"
      placeholder="Return"
      [iconDisplay]="'input'"
      [showIcon]="type === 2 ? true : false"
      inputId="templatedisplay"
      #dateFromCalendar
    >
      <ng-template pTemplate="inputicon" let-clickCallBack="clickCallBack">
        <i *ngIf="type === 2" class="pi pi-angle-down pointer-events-none"></i>
      </ng-template>
    </p-calendar>
    <h3 style="width: 25rem !important" *ngIf="dateCalendarTo">
      {{ dateCalendarTo | date : "EEEE" }}
    </h3>
  </div>
  <div class="travellers">
    <small class="d-flex gap-2" style="width: 25rem !important">
      <span>{{ tab?.travellers?.header }}</span>
      <img
        (click)="travellersOp.toggle($event)"
        src="assets/arrow-down.svg"
        alt="Arrow Down"
      />
    </small>
    <h3
      style="width: 25rem !important"
      *ngIf="
        travellerForm.get('adults')?.value ||
        travellerForm.get('children')?.value ||
        travellerForm.get('infants')?.value
      "
    >
      {{ numberOfTravellers ? numberOfTravellers + " Travellers" : 0 }}
    </h3>
    <h6 *ngIf="travellerForm.get('class')?.value">
      {{ travellerForm.get("class")?.value.name }}
    </h6>
  </div>
  <div class="search">
    <a (click)="onSubmit()">
      <img (click)="onSubmit()" src="assets/search.svg" alt="Arrow Down" />
    </a>
  </div>
</div>
<!-- Overlay Panel for selecting number of travellers -->
<p-overlayPanel #travellersOp [appendTo]="'body'">
  <ng-template pTemplate="content">
    <form class="travellerForm" [formGroup]="travellerForm">
      <div class="control">
        <div class="label">
          <span>Adults</span>
          <small>12+</small>
        </div>
        <p-inputNumber
          formControlName="adults"
          [showButtons]="true"
          [step]="1"
          [min]="0"
          buttonLayout="horizontal"
          incrementButtonIcon="pi pi-plus"
          decrementButtonIcon="pi pi-minus"
          (ngModelChange)="onCounterChange($event)"
        ></p-inputNumber>
      </div>
      <div class="control">
        <div class="label">
          <span>Children</span>
          <small> 2-12</small>
        </div>
        <p-inputNumber
          formControlName="children"
          [showButtons]="true"
          [step]="1"
          [min]="0"
          buttonLayout="horizontal"
          incrementButtonIcon="pi pi-plus"
          decrementButtonIcon="pi pi-minus"
          (ngModelChange)="onCounterChange($event)"
        ></p-inputNumber>
      </div>
      <div class="control">
        <div class="label">
          <span>Infants</span>
          <small>2-</small>
        </div>
        <p-inputNumber
          formControlName="infants"
          [showButtons]="true"
          [step]="1"
          [min]="0"
          buttonLayout="horizontal"
          incrementButtonIcon="pi pi-plus"
          decrementButtonIcon="pi pi-minus"
          (ngModelChange)="onCounterChange($event)"
        ></p-inputNumber>
      </div>
      <div class="control">
        <div class="label">
          <span>Class</span>
        </div>
        <p-dropdown
          formControlName="class"
          [options]="classes"
          optionLabel="name"
          placeholder="Select a Class"
        ></p-dropdown>
      </div>
      <button
        (click)="onApplyClick()"
        (click)="this.travellersOp.toggle($event)"
        type="button"
        [disabled]="travellerForm.invalid"
        class="apply-button"
      >
        Apply
      </button>
    </form>
  </ng-template>
</p-overlayPanel>
